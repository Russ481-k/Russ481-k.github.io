{
  "id": "gig_crawler_5",
  "title": "FastAPIμ™€ PostgreSQLμ„ ν™μ©ν• μ•„μ›ƒμ†μ‹± ν¬λ΅¤λ¬ κ°λ°",
  "content": "\r\nμ΄λ² κΈ€μ—μ„λ” **μ•”νΈν™” μ‹μ¤ν… κµ¬ν„**μ— λ€ν•΄ μμ„Έν μ†κ°ν• κ²μ”!\r\n\r\n---\r\n\r\n# μ•”νΈν™” μ‹μ¤ν… κµ¬ν„: CryptoUtil ν΄λμ¤μ™€ ν”„λ΅μ νΈ ID λ³΄νΈ\r\n\r\nμ•λ…•ν•μ„Έμ”, μ—¬λ¬λ¶„!  \r\nμ΄μ „ κΈ€λ“¤μ—μ„ λ°μ΄ν„°λ² μ΄μ¤ λΉ„λ™κΈ° μ²λ¦¬, μ„Έμ… κ΄€λ¦¬, λ¨λΈ κ°μ„ , ν¬λ΅¤λ¬ μ¤μΌ€μ¤„λ¬ λ“±μ— λ€ν•΄ λ‹¤λ¤λ”λ°μ”, μ΄λ² κΈ€μ—μ„λ” **μ•”νΈν™” μ‹μ¤ν… κµ¬ν„**μ— λ€ν•΄ μ΄μ•ΌκΈ°ν•΄λ³΄λ ¤κ³  ν•©λ‹λ‹¤.\r\n\r\nμ°λ¦¬ ν”„λ΅μ νΈμ—μ„λ” λ³΄μ•μ΄ λ§¤μ° μ¤‘μ”ν• μ”μ† μ¤‘ ν•λ‚μ…λ‹λ‹¤. νΉν, ν”„λ΅μ νΈ IDμ™€ κ°™μ΄ λ―Όκ°ν• μ •λ³΄λ” μ•”νΈν™”λ¥Ό ν†µν•΄ μ™Έλ¶€λ΅ λ…Έμ¶λμ§€ μ•λ„λ΅ λ³΄νΈν•  ν•„μ”κ°€ μμ£ . μ΄λ² κΈ€μ—μ„λ” **Fernet**μ„ ν™μ©ν• λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μ„ μ μ©ν•μ—¬, ν”„λ΅μ νΈ IDμ μ•”νΈν™”μ™€ λ³µνΈν™”λ¥Ό κµ¬ν„ν•λ” λ°©λ²•μ„ μ†κ°ν•κ² μµλ‹λ‹¤.\r\n\r\n---\r\n\r\n## 1. μ•”νΈν™”κ°€ ν•„μ”ν• μ΄μ \r\n\r\n- **λ³΄μ• κ°•ν™”:**  \r\n  λ°μ΄ν„°κ°€ μ™Έλ¶€μ— λ…Έμ¶λλ©΄ μ•…μμ μΈ κ³µκ²©μ— μ·¨μ•½ν•΄μ§‘λ‹λ‹¤. μ•”νΈν™”λ¥Ό ν†µν•΄ μ¤‘μ”ν• μ •λ³΄(μ: ν”„λ΅μ νΈ ID)λ¥Ό μ•μ „ν•κ² λ³΄νΈν•  μ μμµλ‹λ‹¤.\r\n\r\n- **λ°μ΄ν„° λ¬΄κ²°μ„± μ μ§€:**  \r\n  μ•”νΈν™”λ λ°μ΄ν„°λ” μ „μ†΅ μ¤‘ λ³€μ΅° μ—¬λ¶€λ¥Ό μ‰½κ² ν™•μΈν•  μ μμ–΄, λ°μ΄ν„°μ μ‹ λΆ°μ„±μ„ λ³΄μ¥ν•  μ μμµλ‹λ‹¤.\r\n\r\n- **κ·μ • μ¤€μ:**  \r\n  μ—¬λ¬ λ³΄μ• κ·μ μ™€ μ»΄ν”λΌμ΄μ–Έμ¤ μ”κ±΄μ„ λ§μ΅±μ‹ν‚¤κΈ° μ„ν•΄ λ―Όκ° μ •λ³΄λ¥Ό μ•”νΈν™”ν•λ” κ²ƒμ€ ν•„μμ μ…λ‹λ‹¤.\r\n\r\n---\r\n\r\n## 2. Fernet λ€μΉ­ν‚¤ μ•”νΈν™”λ€?\r\n\r\n**Fernet**μ€ νμ΄μ¬μ [cryptography](https://cryptography.io/) λΌμ΄λΈλ¬λ¦¬μ—μ„ μ κ³µν•λ” λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μ…λ‹λ‹¤.\r\n\r\n- **λ€μΉ­ν‚¤ μ•”νΈν™”:** μ•”νΈν™”μ™€ λ³µνΈν™”μ— λ™μΌν• ν‚¤λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.\r\n- **μ‚¬μ©λ²•μ΄ κ°„λ‹¨:** λ‡ μ¤„μ μ½”λ“λ΅ κ°•λ ¥ν• μ•”νΈν™” κΈ°λ¥μ„ κµ¬ν„ν•  μ μμµλ‹λ‹¤.\r\n- **μ•μ „μ„±:** μ•”νΈν™”λ λ©”μ‹μ§€μ λ¬΄κ²°μ„±κ³Ό μΈμ¦μ„ λ³΄μ¥ν•©λ‹λ‹¤.\r\n\r\n---\r\n\r\n## 3. CryptoUtil ν΄λμ¤ κµ¬ν„\r\n\r\nμ΄μ  μ‹¤μ λ΅ `CryptoUtil` ν΄λμ¤λ¥Ό κµ¬ν„ν•΄ λ³΄κ² μµλ‹λ‹¤. μ΄ ν΄λμ¤λ” μ•”νΈν™”μ™€ λ³µνΈν™” κΈ°λ¥μ„ μ κ³µν•λ©°, μ£Όλ΅ ν”„λ΅μ νΈ IDμ™€ κ°™μ€ λ―Όκ°ν• λ°μ΄ν„°λ¥Ό λ³΄νΈν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤.\r\n\r\n```python\r\nfrom cryptography.fernet import Fernet\r\n\r\nclass CryptoUtil:\r\n    def __init__(self, key: str):\r\n        \"\"\"\r\n        μƒμ„±μ: μ•”νΈν™”μ— μ‚¬μ©ν•  Fernet μΈμ¤ν„΄μ¤λ¥Ό μ΄κΈ°ν™”ν•©λ‹λ‹¤.\r\n        :param key: Fernet μ•”νΈν™” ν‚¤ (λ¬Έμμ—΄)\r\n        \"\"\"\r\n        self.fernet = Fernet(key)\r\n\r\n    def encrypt(self, data: str) -> str:\r\n        \"\"\"\r\n        λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•©λ‹λ‹¤.\r\n        :param data: μ•”νΈν™”ν•  λ¬Έμμ—΄ λ°μ΄ν„°\r\n        :return: μ•”νΈν™”λ λ¬Έμμ—΄ (ν† ν°)\r\n        \"\"\"\r\n        return self.fernet.encrypt(data.encode()).decode()\r\n\r\n    def decrypt(self, token: str) -> str:\r\n        \"\"\"\r\n        μ•”νΈν™”λ ν† ν°μ„ λ³µνΈν™”ν•©λ‹λ‹¤.\r\n        :param token: μ•”νΈν™”λ λ¬Έμμ—΄ (ν† ν°)\r\n        :return: λ³µνΈν™”λ μ›λ³Έ λ¬Έμμ—΄\r\n        \"\"\"\r\n        return self.fernet.decrypt(token.encode()).decode()\r\n\r\n\r\n# μμ‹ μ‚¬μ©λ²•\r\nif __name__ == '__main__':\r\n    # μ•”νΈν™” ν‚¤λ” λ³΄ν†µ ν™κ²½ λ³€μλ‚ μ„¤μ • νμΌμ—μ„ μ•μ „ν•κ² λ΅λ“ν•©λ‹λ‹¤.\r\n    # μ—¬κΈ°μ„λ” μμ‹λ΅ μƒλ΅μ΄ ν‚¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤.\r\n    key = Fernet.generate_key()\r\n    crypto_util = CryptoUtil(key)\r\n\r\n    original_id = \"project123\"\r\n    encrypted_id = crypto_util.encrypt(original_id)\r\n    decrypted_id = crypto_util.decrypt(encrypted_id)\r\n\r\n    print(\"μ›λ³Έ ν”„λ΅μ νΈ ID:\", original_id)\r\n    print(\"μ•”νΈν™”λ ν”„λ΅μ νΈ ID:\", encrypted_id)\r\n    print(\"λ³µνΈν™”λ ν”„λ΅μ νΈ ID:\", decrypted_id)\r\n```\r\n\r\n### 3.1 μ½”λ“ μ„¤λ…\r\n\r\n- **μ΄κΈ°ν™”:**  \r\n  `__init__` λ©”μ„λ“μ—μ„ μ „λ‹¬λ°›μ€ μ•”νΈν™” ν‚¤λ΅ `Fernet` μΈμ¤ν„΄μ¤λ¥Ό μ΄κΈ°ν™”ν•©λ‹λ‹¤.\r\n\r\n- **encrypt λ©”μ„λ“:**  \r\n  λ¬Έμμ—΄ λ°μ΄ν„°λ¥Ό λ°”μ΄νΈλ΅ λ³€ν™ν• ν›„ μ•”νΈν™”ν•μ—¬, λ‹¤μ‹ λ¬Έμμ—΄λ΅ λ””μ½”λ”©ν•©λ‹λ‹¤.\r\n\r\n- **decrypt λ©”μ„λ“:**  \r\n  μ•”νΈν™”λ ν† ν°μ„ λ°”μ΄νΈλ΅ λ³€ν™ν•μ—¬ λ³µνΈν™”ν•κ³ , μ›λμ λ¬Έμμ—΄λ΅ λ””μ½”λ”©ν•©λ‹λ‹¤.\r\n\r\n---\r\n\r\n## 4. μ„¤μ •μ— μ•”νΈν™” ν‚¤ μ¶”κ°€ν•κΈ°\r\n\r\nμ‹¤μ  μ΄μ ν™κ²½μ—μ„λ” μ•”νΈν™” ν‚¤λ¥Ό μ½”λ“μ— ν•λ“μ½”λ”©ν•μ§€ μ•κ³ , λ³΄μ• μ„¤μ • νμΌμ΄λ‚ ν™κ²½ λ³€μμ—μ„ λ΅λ“ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, `config.py` νμΌμ„ λ§λ“¤μ–΄ μ•„λμ™€ κ°™μ΄ μ‘μ„±ν•  μ μμµλ‹λ‹¤:\r\n\r\n```python\r\nimport os\r\n\r\n# ν™κ²½ λ³€μμ—μ„ μ•”νΈν™” ν‚¤λ¥Ό κ°€μ Έμ¤κ±°λ‚, κΈ°λ³Έκ°’μ„ μ„¤μ •ν•©λ‹λ‹¤.\r\nENCRYPTION_KEY = os.getenv(\"ENCRYPTION_KEY\", Fernet.generate_key().decode())\r\n```\r\n\r\nμ΄λ ‡κ² μ„¤μ •ν•΄λ‘λ©΄, μ΄μ ν™κ²½μ—μ„ λ³„λ„μ μ•”νΈν™” ν‚¤λ¥Ό μ•μ „ν•κ² κ΄€λ¦¬ν•  μ μμ–΄ λ³΄μ•μ„±μ΄ ν•μΈµ κ°•ν™”λ©λ‹λ‹¤.\r\n\r\n---\r\n\r\n## 5. μ•”νΈν™” μ‹μ¤ν…μ μ μ©\r\n\r\nμ΄μ  API μ—”λ“ν¬μΈνΈλ‚ λ°μ΄ν„° μ €μ¥ μ‹, ν”„λ΅μ νΈ IDλ¥Ό μ§μ ‘ λ…Έμ¶ν•λ” λ€μ‹  μ•”νΈν™”λ κ°’μ„ μ‚¬μ©ν•λ©΄ λ©λ‹λ‹¤.  \r\nμλ¥Ό λ“¤μ–΄, ν”„λ΅μ νΈ μ΅°ν APIμ—μ„λ” ν΄λΌμ΄μ–ΈνΈμ—κ² μ•”νΈν™”λ IDλ¥Ό μ κ³µν•κ³ , μ΄ν›„ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­ μ‹ ν•΄λ‹Ή μ•”νΈν™”λ IDλ¥Ό λ³µνΈν™”ν•μ—¬ λ‚΄λ¶€ λ°μ΄ν„°λ² μ΄μ¤μ—μ„ μ΅°νν•  μ μμµλ‹λ‹¤.\r\n\r\nμ΄μ™€ κ°™μ΄ μ•”νΈν™” μ‹μ¤ν…μ„ λ„μ…ν•λ©΄, λ―Όκ° μ •λ³΄μ λ…Έμ¶ μ„ν—μ„ μ¤„μ΄κ³  λ³΄μ•μ„ κ°•ν™”ν•  μ μμµλ‹λ‹¤.\r\n\r\n---\r\n\r\n## 6. λ§μΉλ©°\r\n\r\nμ¤λμ€ **μ•”νΈν™” μ‹μ¤ν… κµ¬ν„**μ— λ€ν•΄ μ‚΄ν΄λ³΄μ•μµλ‹λ‹¤.  \r\n`CryptoUtil` ν΄λμ¤λ¥Ό ν†µν•΄ κ°„λ‹¨ν•κ² μ•”νΈν™”μ™€ λ³µνΈν™” κΈ°λ¥μ„ κµ¬ν„ν•  μ μμ—κ³ , μ΄λ¥Ό ν†µν•΄ ν”„λ΅μ νΈ IDμ™€ κ°™μ€ λ―Όκ°ν• λ°μ΄ν„°λ¥Ό ν¨κ³Όμ μΌλ΅ λ³΄νΈν•  μ μμμ„ ν™•μΈν–μµλ‹λ‹¤.\r\n\r\nλ‹¤μ κΈ€μ—μ„λ” **API μ—”λ“ν¬μΈνΈ κ°μ„ ** λ° λΉ„λ™κΈ° λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬ μ μ©μ— λ€ν•΄ λ‹¤λ£° μμ •μ…λ‹λ‹¤.\r\n\r\nκ°μ‚¬ν•©λ‹λ‹¤. λ‹¤μ κΈ€μ—μ„ λ λ§λ‚μ”! π€\r\n\r\n---\r\n",
  "date": "2025-02-12",
  "category": "backend",
  "tags": [
    "FastAPI",
    "PostgreSQL",
    "Python",
    "Crawler",
    "asyncio",
    "SQLAlchemy",
    "λΉ„λ™κΈ°μ²λ¦¬",
    "λ°μ΄ν„°μμ§‘",
    "μ‹¤μ‹κ°„μ²λ¦¬",
    "μ•”νΈν™”",
    "Fernet",
    "λ³΄μ•",
    "cryptography",
    "λ°μ΄ν„°λ³΄νΈ"
  ],
  "thumbnail": "/images/fastapi.png",
  "translations": {
    "ko": {
      "title": "FastAPIμ™€ PostgreSQLμ„ ν™μ©ν• μ•„μ›ƒμ†μ‹± ν¬λ΅¤λ¬ κ°λ°",
      "description": "ν¬λ΅¤λ¬ ν”„λ΅μ νΈμ— μ•”νΈν™” μ‹μ¤ν…μ„ λ„μ…ν–μ–΄μ”! Fernetμ„ ν™μ©ν• λ€μΉ­ν‚¤ μ•”νΈν™”λ΅ ν”„λ΅μ νΈ IDλ¥Ό μ•μ „ν•κ² λ³΄νΈν•κ³ , CryptoUtil ν΄λμ¤λ΅ νΈλ¦¬ν•κ² κ΄€λ¦¬ν•  μ μκ² λμ—λ‹µλ‹λ‹¤. π”’",
      "content": "<p>μ΄λ² κΈ€μ—μ„λ” <strong>μ•”νΈν™” μ‹μ¤ν… κµ¬ν„</strong>μ— λ€ν•΄ μμ„Έν μ†κ°ν• κ²μ”!</p>\n<hr>\n<h1 id=\"heading-0\">μ•”νΈν™” μ‹μ¤ν… κµ¬ν„: CryptoUtil ν΄λμ¤μ™€ ν”„λ΅μ νΈ ID λ³΄νΈ</h1>\n<p>μ•λ…•ν•μ„Έμ”, μ—¬λ¬λ¶„!<br>\nμ΄μ „ κΈ€λ“¤μ—μ„ λ°μ΄ν„°λ² μ΄μ¤ λΉ„λ™κΈ° μ²λ¦¬, μ„Έμ… κ΄€λ¦¬, λ¨λΈ κ°μ„ , ν¬λ΅¤λ¬ μ¤μΌ€μ¤„λ¬ λ“±μ— λ€ν•΄ λ‹¤λ¤λ”λ°μ”, μ΄λ² κΈ€μ—μ„λ” <strong>μ•”νΈν™” μ‹μ¤ν… κµ¬ν„</strong>μ— λ€ν•΄ μ΄μ•ΌκΈ°ν•΄λ³΄λ ¤κ³  ν•©λ‹λ‹¤.</p>\n<p>μ°λ¦¬ ν”„λ΅μ νΈμ—μ„λ” λ³΄μ•μ΄ λ§¤μ° μ¤‘μ”ν• μ”μ† μ¤‘ ν•λ‚μ…λ‹λ‹¤. νΉν, ν”„λ΅μ νΈ IDμ™€ κ°™μ΄ λ―Όκ°ν• μ •λ³΄λ” μ•”νΈν™”λ¥Ό ν†µν•΄ μ™Έλ¶€λ΅ λ…Έμ¶λμ§€ μ•λ„λ΅ λ³΄νΈν•  ν•„μ”κ°€ μμ£ . μ΄λ² κΈ€μ—μ„λ” <strong>Fernet</strong>μ„ ν™μ©ν• λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μ„ μ μ©ν•μ—¬, ν”„λ΅μ νΈ IDμ μ•”νΈν™”μ™€ λ³µνΈν™”λ¥Ό κµ¬ν„ν•λ” λ°©λ²•μ„ μ†κ°ν•κ² μµλ‹λ‹¤.</p>\n<hr>\n<h2 id=\"heading-1\">1. μ•”νΈν™”κ°€ ν•„μ”ν• μ΄μ </h2>\n<ul>\n<li>\n<p><strong>λ³΄μ• κ°•ν™”:</strong><br>\nλ°μ΄ν„°κ°€ μ™Έλ¶€μ— λ…Έμ¶λλ©΄ μ•…μμ μΈ κ³µκ²©μ— μ·¨μ•½ν•΄μ§‘λ‹λ‹¤. μ•”νΈν™”λ¥Ό ν†µν•΄ μ¤‘μ”ν• μ •λ³΄(μ: ν”„λ΅μ νΈ ID)λ¥Ό μ•μ „ν•κ² λ³΄νΈν•  μ μμµλ‹λ‹¤.</p>\n</li>\n<li>\n<p><strong>λ°μ΄ν„° λ¬΄κ²°μ„± μ μ§€:</strong><br>\nμ•”νΈν™”λ λ°μ΄ν„°λ” μ „μ†΅ μ¤‘ λ³€μ΅° μ—¬λ¶€λ¥Ό μ‰½κ² ν™•μΈν•  μ μμ–΄, λ°μ΄ν„°μ μ‹ λΆ°μ„±μ„ λ³΄μ¥ν•  μ μμµλ‹λ‹¤.</p>\n</li>\n<li>\n<p><strong>κ·μ • μ¤€μ:</strong><br>\nμ—¬λ¬ λ³΄μ• κ·μ μ™€ μ»΄ν”λΌμ΄μ–Έμ¤ μ”κ±΄μ„ λ§μ΅±μ‹ν‚¤κΈ° μ„ν•΄ λ―Όκ° μ •λ³΄λ¥Ό μ•”νΈν™”ν•λ” κ²ƒμ€ ν•„μμ μ…λ‹λ‹¤.</p>\n</li>\n</ul>\n<hr>\n<h2 id=\"heading-2\">2. Fernet λ€μΉ­ν‚¤ μ•”νΈν™”λ€?</h2>\n<p><strong>Fernet</strong>μ€ νμ΄μ¬μ <a href=\"https://cryptography.io/\">cryptography</a> λΌμ΄λΈλ¬λ¦¬μ—μ„ μ κ³µν•λ” λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μ…λ‹λ‹¤.</p>\n<ul>\n<li><strong>λ€μΉ­ν‚¤ μ•”νΈν™”:</strong> μ•”νΈν™”μ™€ λ³µνΈν™”μ— λ™μΌν• ν‚¤λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.</li>\n<li><strong>μ‚¬μ©λ²•μ΄ κ°„λ‹¨:</strong> λ‡ μ¤„μ μ½”λ“λ΅ κ°•λ ¥ν• μ•”νΈν™” κΈ°λ¥μ„ κµ¬ν„ν•  μ μμµλ‹λ‹¤.</li>\n<li><strong>μ•μ „μ„±:</strong> μ•”νΈν™”λ λ©”μ‹μ§€μ λ¬΄κ²°μ„±κ³Ό μΈμ¦μ„ λ³΄μ¥ν•©λ‹λ‹¤.</li>\n</ul>\n<hr>\n<h2 id=\"heading-3\">3. CryptoUtil ν΄λμ¤ κµ¬ν„</h2>\n<p>μ΄μ  μ‹¤μ λ΅ <code>CryptoUtil</code> ν΄λμ¤λ¥Ό κµ¬ν„ν•΄ λ³΄κ² μµλ‹λ‹¤. μ΄ ν΄λμ¤λ” μ•”νΈν™”μ™€ λ³µνΈν™” κΈ°λ¥μ„ μ κ³µν•λ©°, μ£Όλ΅ ν”„λ΅μ νΈ IDμ™€ κ°™μ€ λ―Όκ°ν• λ°μ΄ν„°λ¥Ό λ³΄νΈν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤.</p>\n<pre><code class=\"language-python\">from cryptography.fernet import Fernet\n\nclass CryptoUtil:\n    def __init__(self, key: str):\n        \"\"\"\n        μƒμ„±μ: μ•”νΈν™”μ— μ‚¬μ©ν•  Fernet μΈμ¤ν„΄μ¤λ¥Ό μ΄κΈ°ν™”ν•©λ‹λ‹¤.\n        :param key: Fernet μ•”νΈν™” ν‚¤ (λ¬Έμμ—΄)\n        \"\"\"\n        self.fernet = Fernet(key)\n\n    def encrypt(self, data: str) -&gt; str:\n        \"\"\"\n        λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•©λ‹λ‹¤.\n        :param data: μ•”νΈν™”ν•  λ¬Έμμ—΄ λ°μ΄ν„°\n        :return: μ•”νΈν™”λ λ¬Έμμ—΄ (ν† ν°)\n        \"\"\"\n        return self.fernet.encrypt(data.encode()).decode()\n\n    def decrypt(self, token: str) -&gt; str:\n        \"\"\"\n        μ•”νΈν™”λ ν† ν°μ„ λ³µνΈν™”ν•©λ‹λ‹¤.\n        :param token: μ•”νΈν™”λ λ¬Έμμ—΄ (ν† ν°)\n        :return: λ³µνΈν™”λ μ›λ³Έ λ¬Έμμ—΄\n        \"\"\"\n        return self.fernet.decrypt(token.encode()).decode()\n\n\n# μμ‹ μ‚¬μ©λ²•\nif __name__ == '__main__':\n    # μ•”νΈν™” ν‚¤λ” λ³΄ν†µ ν™κ²½ λ³€μλ‚ μ„¤μ • νμΌμ—μ„ μ•μ „ν•κ² λ΅λ“ν•©λ‹λ‹¤.\n    # μ—¬κΈ°μ„λ” μμ‹λ΅ μƒλ΅μ΄ ν‚¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤.\n    key = Fernet.generate_key()\n    crypto_util = CryptoUtil(key)\n\n    original_id = \"project123\"\n    encrypted_id = crypto_util.encrypt(original_id)\n    decrypted_id = crypto_util.decrypt(encrypted_id)\n\n    print(\"μ›λ³Έ ν”„λ΅μ νΈ ID:\", original_id)\n    print(\"μ•”νΈν™”λ ν”„λ΅μ νΈ ID:\", encrypted_id)\n    print(\"λ³µνΈν™”λ ν”„λ΅μ νΈ ID:\", decrypted_id)\n</code></pre>\n<h3 id=\"heading-4\">3.1 μ½”λ“ μ„¤λ…</h3>\n<ul>\n<li>\n<p><strong>μ΄κΈ°ν™”:</strong><br>\n<code>__init__</code> λ©”μ„λ“μ—μ„ μ „λ‹¬λ°›μ€ μ•”νΈν™” ν‚¤λ΅ <code>Fernet</code> μΈμ¤ν„΄μ¤λ¥Ό μ΄κΈ°ν™”ν•©λ‹λ‹¤.</p>\n</li>\n<li>\n<p><strong>encrypt λ©”μ„λ“:</strong><br>\nλ¬Έμμ—΄ λ°μ΄ν„°λ¥Ό λ°”μ΄νΈλ΅ λ³€ν™ν• ν›„ μ•”νΈν™”ν•μ—¬, λ‹¤μ‹ λ¬Έμμ—΄λ΅ λ””μ½”λ”©ν•©λ‹λ‹¤.</p>\n</li>\n<li>\n<p><strong>decrypt λ©”μ„λ“:</strong><br>\nμ•”νΈν™”λ ν† ν°μ„ λ°”μ΄νΈλ΅ λ³€ν™ν•μ—¬ λ³µνΈν™”ν•κ³ , μ›λμ λ¬Έμμ—΄λ΅ λ””μ½”λ”©ν•©λ‹λ‹¤.</p>\n</li>\n</ul>\n<hr>\n<h2 id=\"heading-5\">4. μ„¤μ •μ— μ•”νΈν™” ν‚¤ μ¶”κ°€ν•κΈ°</h2>\n<p>μ‹¤μ  μ΄μ ν™κ²½μ—μ„λ” μ•”νΈν™” ν‚¤λ¥Ό μ½”λ“μ— ν•λ“μ½”λ”©ν•μ§€ μ•κ³ , λ³΄μ• μ„¤μ • νμΌμ΄λ‚ ν™κ²½ λ³€μμ—μ„ λ΅λ“ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, <code>config.py</code> νμΌμ„ λ§λ“¤μ–΄ μ•„λμ™€ κ°™μ΄ μ‘μ„±ν•  μ μμµλ‹λ‹¤:</p>\n<pre><code class=\"language-python\">import os\n\n# ν™κ²½ λ³€μμ—μ„ μ•”νΈν™” ν‚¤λ¥Ό κ°€μ Έμ¤κ±°λ‚, κΈ°λ³Έκ°’μ„ μ„¤μ •ν•©λ‹λ‹¤.\nENCRYPTION_KEY = os.getenv(\"ENCRYPTION_KEY\", Fernet.generate_key().decode())\n</code></pre>\n<p>μ΄λ ‡κ² μ„¤μ •ν•΄λ‘λ©΄, μ΄μ ν™κ²½μ—μ„ λ³„λ„μ μ•”νΈν™” ν‚¤λ¥Ό μ•μ „ν•κ² κ΄€λ¦¬ν•  μ μμ–΄ λ³΄μ•μ„±μ΄ ν•μΈµ κ°•ν™”λ©λ‹λ‹¤.</p>\n<hr>\n<h2 id=\"heading-6\">5. μ•”νΈν™” μ‹μ¤ν…μ μ μ©</h2>\n<p>μ΄μ  API μ—”λ“ν¬μΈνΈλ‚ λ°μ΄ν„° μ €μ¥ μ‹, ν”„λ΅μ νΈ IDλ¥Ό μ§μ ‘ λ…Έμ¶ν•λ” λ€μ‹  μ•”νΈν™”λ κ°’μ„ μ‚¬μ©ν•λ©΄ λ©λ‹λ‹¤.<br>\nμλ¥Ό λ“¤μ–΄, ν”„λ΅μ νΈ μ΅°ν APIμ—μ„λ” ν΄λΌμ΄μ–ΈνΈμ—κ² μ•”νΈν™”λ IDλ¥Ό μ κ³µν•κ³ , μ΄ν›„ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­ μ‹ ν•΄λ‹Ή μ•”νΈν™”λ IDλ¥Ό λ³µνΈν™”ν•μ—¬ λ‚΄λ¶€ λ°μ΄ν„°λ² μ΄μ¤μ—μ„ μ΅°νν•  μ μμµλ‹λ‹¤.</p>\n<p>μ΄μ™€ κ°™μ΄ μ•”νΈν™” μ‹μ¤ν…μ„ λ„μ…ν•λ©΄, λ―Όκ° μ •λ³΄μ λ…Έμ¶ μ„ν—μ„ μ¤„μ΄κ³  λ³΄μ•μ„ κ°•ν™”ν•  μ μμµλ‹λ‹¤.</p>\n<hr>\n<h2 id=\"heading-7\">6. λ§μΉλ©°</h2>\n<p>μ¤λμ€ <strong>μ•”νΈν™” μ‹μ¤ν… κµ¬ν„</strong>μ— λ€ν•΄ μ‚΄ν΄λ³΄μ•μµλ‹λ‹¤.<br>\n<code>CryptoUtil</code> ν΄λμ¤λ¥Ό ν†µν•΄ κ°„λ‹¨ν•κ² μ•”νΈν™”μ™€ λ³µνΈν™” κΈ°λ¥μ„ κµ¬ν„ν•  μ μμ—κ³ , μ΄λ¥Ό ν†µν•΄ ν”„λ΅μ νΈ IDμ™€ κ°™μ€ λ―Όκ°ν• λ°μ΄ν„°λ¥Ό ν¨κ³Όμ μΌλ΅ λ³΄νΈν•  μ μμμ„ ν™•μΈν–μµλ‹λ‹¤.</p>\n<p>λ‹¤μ κΈ€μ—μ„λ” <strong>API μ—”λ“ν¬μΈνΈ κ°μ„ </strong> λ° λΉ„λ™κΈ° λ°μ΄ν„°λ² μ΄μ¤ μΏΌλ¦¬ μ μ©μ— λ€ν•΄ λ‹¤λ£° μμ •μ…λ‹λ‹¤.</p>\n<p>κ°μ‚¬ν•©λ‹λ‹¤. λ‹¤μ κΈ€μ—μ„ λ λ§λ‚μ”! π€</p>\n<hr>\n",
      "tocItems": [
        {
          "id": "heading-0",
          "text": "μ•”νΈν™” μ‹μ¤ν… κµ¬ν„: CryptoUtil ν΄λμ¤μ™€ ν”„λ΅μ νΈ ID λ³΄νΈ",
          "level": 1,
          "isMainTopic": true,
          "position": 0
        },
        {
          "id": "heading-1",
          "text": "1. μ•”νΈν™”κ°€ ν•„μ”ν• μ΄μ ",
          "level": 2,
          "isMainTopic": true,
          "position": 50
        },
        {
          "id": "heading-2",
          "text": "2. Fernet λ€μΉ­ν‚¤ μ•”νΈν™”λ€?",
          "level": 2,
          "isMainTopic": true,
          "position": 100
        },
        {
          "id": "heading-3",
          "text": "3. CryptoUtil ν΄λμ¤ κµ¬ν„",
          "level": 2,
          "isMainTopic": true,
          "position": 150
        },
        {
          "id": "heading-4",
          "text": "3.1 μ½”λ“ μ„¤λ…",
          "level": 3,
          "isMainTopic": false,
          "position": 200
        },
        {
          "id": "heading-5",
          "text": "4. μ„¤μ •μ— μ•”νΈν™” ν‚¤ μ¶”κ°€ν•κΈ°",
          "level": 2,
          "isMainTopic": true,
          "position": 250
        },
        {
          "id": "heading-6",
          "text": "5. μ•”νΈν™” μ‹μ¤ν…μ μ μ©",
          "level": 2,
          "isMainTopic": true,
          "position": 300
        },
        {
          "id": "heading-7",
          "text": "6. λ§μΉλ©°",
          "level": 2,
          "isMainTopic": true,
          "position": 350
        }
      ]
    },
    "en": {
      "title": "Building an Outsourcing Crawler with FastAPI and PostgreSQL",
      "description": "I implemented an encryption system in the crawler project! Using Fernet symmetric key encryption to securely protect project IDs and manage them conveniently with the CryptoUtil class. π”’",
      "content": "<p>In this post, I'll introduce the <strong>implementation of the encryption system</strong> in detail!</p>\n<hr>\n<h1 id=\"heading-0\">Implementing Encryption: CryptoUtil Class and Project ID Protection</h1>\n<p>Hello everyone!<br>\nIn previous posts, we covered database async processing, session management, model improvements, and crawler scheduling. Today, we'll discuss the <strong>implementation of an encryption system</strong>.</p>\n<p>Security is one of the most critical elements in our project. In particular, sensitive information like project IDs needs to be protected from external exposure through encryption. In this post, I'll introduce how to implement encryption and decryption of project IDs using <strong>Fernet</strong> symmetric key encryption.</p>\n<hr>\n<h2 id=\"heading-1\">1. Why Do We Need Encryption?</h2>\n<ul>\n<li>\n<p><strong>Enhanced Security:</strong><br>\nWhen data is exposed externally, it becomes vulnerable to malicious attacks. Through encryption, we can securely protect important information (e.g., project IDs).</p>\n</li>\n<li>\n<p><strong>Maintaining Data Integrity:</strong><br>\nEncrypted data makes it easy to verify if tampering occurred during transmission, ensuring data reliability.</p>\n</li>\n<li>\n<p><strong>Regulatory Compliance:</strong><br>\nEncrypting sensitive information is essential to meet various security regulations and compliance requirements.</p>\n</li>\n</ul>\n<hr>\n<h2 id=\"heading-2\">2. What is Fernet Symmetric Key Encryption?</h2>\n<p><strong>Fernet</strong> is a symmetric key encryption method provided by Python's <a href=\"https://cryptography.io/\">cryptography</a> library.</p>\n<ul>\n<li><strong>Symmetric Key Encryption:</strong> Uses the same key for encryption and decryption</li>\n<li><strong>Simple Usage:</strong> Implements powerful encryption features with just a few lines of code</li>\n<li><strong>Security:</strong> Ensures integrity and authentication of encrypted messages</li>\n</ul>\n<hr>\n<h2 id=\"heading-3\">3. Implementing the CryptoUtil Class</h2>\n<p>Now let's implement the <code>CryptoUtil</code> class. This class provides encryption and decryption functionality, primarily used to protect sensitive data like project IDs.</p>\n<pre><code class=\"language-python\">from cryptography.fernet import Fernet\n\nclass CryptoUtil:\n    def __init__(self, key: str):\n        \"\"\"\n        Constructor: Initializes the Fernet instance for encryption.\n        :param key: Fernet encryption key (string)\n        \"\"\"\n        self.fernet = Fernet(key)\n\n    def encrypt(self, data: str) -&gt; str:\n        \"\"\"\n        Encrypts the data.\n        :param data: String data to encrypt\n        :return: Encrypted string (token)\n        \"\"\"\n        return self.fernet.encrypt(data.encode()).decode()\n\n    def decrypt(self, token: str) -&gt; str:\n        \"\"\"\n        Decrypts the token.\n        :param token: Encrypted string (token)\n        :return: Decrypted original string\n        \"\"\"\n        return self.fernet.decrypt(token.encode()).decode()\n\n\n# Example usage\nif __name__ == '__main__':\n    # The encryption key is usually loaded safely from environment variables or configuration files.\n    # Here, we create a new key for demonstration purposes.\n    key = Fernet.generate_key()\n    crypto_util = CryptoUtil(key)\n\n    original_id = \"project123\"\n    encrypted_id = crypto_util.encrypt(original_id)\n    decrypted_id = crypto_util.decrypt(encrypted_id)\n\n    print(\"Original project ID:\", original_id)\n    print(\"Encrypted project ID:\", encrypted_id)\n    print(\"Decrypted project ID:\", decrypted_id)\n</code></pre>\n<h3 id=\"heading-4\">3.1 Code Explanation</h3>\n<ul>\n<li>\n<p><strong>Initialization:</strong><br>\nThe <code>__init__</code> method initializes the <code>Fernet</code> instance with the encryption key passed in.</p>\n</li>\n<li>\n<p><strong>encrypt method:</strong><br>\nConverts string data to bytes and encrypts it, then decodes it back to a string.</p>\n</li>\n<li>\n<p><strong>decrypt method:</strong><br>\nConverts the encrypted token to bytes and decrypts it, then decodes it back to a string.</p>\n</li>\n</ul>\n<hr>\n<h2 id=\"heading-5\">4. Adding the Encryption Key to the Configuration</h2>\n<p>In actual operation, it is better to load the encryption key from the security configuration file or environment variables rather than hard-coding it in the code. For example, you can create a <code>config.py</code> file and write it as follows:</p>\n<pre><code class=\"language-python\">import os\n\n# Get the encryption key from the environment variable or set a default value.\nENCRYPTION_KEY = os.getenv(\"ENCRYPTION_KEY\", Fernet.generate_key().decode())\n</code></pre>\n<p>This way, you can safely manage the encryption key in the operating environment, which further enhances security.</p>\n<hr>\n<h2 id=\"heading-6\">5. Applying the Encryption System</h2>\n<p>Now, you can use the encrypted value instead of exposing the project ID directly in API endpoints or data storage.<br>\nFor example, in a project retrieval API, you can provide the encrypted ID to the client and then decrypt it in the client's request to query the internal database.</p>\n<p>By introducing the encryption system, you can reduce the risk of exposing sensitive information and enhance security.</p>\n<hr>\n<h2 id=\"heading-7\">6. Conclusion</h2>\n<p>Today, we looked at the implementation of the encryption system.<br>\nWe were able to implement the encryption and decryption functions simply using the <code>CryptoUtil</code> class, and we confirmed that we can effectively protect sensitive data like project IDs.</p>\n<p>Next, we will cover <strong>improving API endpoints</strong> and <strong>applying asynchronous database queries</strong>.</p>\n<p>Thank you! See you next time! π€</p>\n<hr>\n",
      "tocItems": [
        {
          "id": "heading-0",
          "text": "Implementing Encryption: CryptoUtil Class and Project ID Protection",
          "level": 1,
          "isMainTopic": true,
          "position": 0
        },
        {
          "id": "heading-1",
          "text": "1. Why Do We Need Encryption?",
          "level": 2,
          "isMainTopic": true,
          "position": 50
        },
        {
          "id": "heading-2",
          "text": "2. What is Fernet Symmetric Key Encryption?",
          "level": 2,
          "isMainTopic": true,
          "position": 100
        },
        {
          "id": "heading-3",
          "text": "3. Implementing the CryptoUtil Class",
          "level": 2,
          "isMainTopic": true,
          "position": 150
        },
        {
          "id": "heading-4",
          "text": "3.1 Code Explanation",
          "level": 3,
          "isMainTopic": false,
          "position": 200
        },
        {
          "id": "heading-5",
          "text": "4. Adding the Encryption Key to the Configuration",
          "level": 2,
          "isMainTopic": true,
          "position": 250
        },
        {
          "id": "heading-6",
          "text": "5. Applying the Encryption System",
          "level": 2,
          "isMainTopic": true,
          "position": 300
        },
        {
          "id": "heading-7",
          "text": "6. Conclusion",
          "level": 2,
          "isMainTopic": true,
          "position": 350
        }
      ]
    }
  },
  "imageHeights": {}
}
{
  "id": "gig_crawler_3",
  "title": "FastAPIì™€ PostgreSQLì„ í™œìš©í•œ ì•„ì›ƒì†Œì‹± í¬ë¡¤ëŸ¬ ê°œë°œ",
  "content": "\r\n# database.pyë¥¼ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ê³  ì„¸ì…˜ ê´€ë¦¬ í†µí•©í•˜ê¸°\r\n\r\nì•ˆë…•í•˜ì„¸ìš”, ì—¬ëŸ¬ë¶„!  \r\nì§€ë‚œ ë²ˆ ê¸€ì—ì„œëŠ” SQLAlchemyì˜ ë¹„ë™ê¸° ì„¤ì •ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ëŠ”ë°ìš”, ì˜¤ëŠ˜ì€ ê·¸ ì—°ì¥ì„ ìƒì—ì„œ **database.py** íŒŒì¼ì„ ì–´ë–»ê²Œ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ê³ , **ì„¸ì…˜ ê´€ë¦¬ ì½”ë“œë¥¼ í†µí•©**í•  ìˆ˜ ìˆëŠ”ì§€ ìì„¸íˆ ì„¤ëª…í•´ ë“œë¦¬ë ¤ê³  í•´ìš”.\r\n\r\në¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë„ì…í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—… ì‹œ ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„ì„ ì¤„ì´ê³ , ì—¬ëŸ¬ ìš”ì²­ì„ ë™ì‹œì— íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹µë‹ˆë‹¤. í•œ ë²ˆ ì°¨ê·¼ì°¨ê·¼ ì‚´í´ë³¼ê²Œìš”!\r\n\r\n---\r\n\r\n## 1. ì™œ ë¹„ë™ê¸° ë°©ì‹ì¼ê¹Œìš”?\r\n\r\në¨¼ì €, ë™ê¸° ë°©ì‹ê³¼ ë¹„ë™ê¸° ë°©ì‹ì˜ ì°¨ì´ë¥¼ ê°„ë‹¨íˆ ì§šì–´ë³´ê² ìŠµë‹ˆë‹¤.\r\n\r\n- **ë™ê¸° ë°©ì‹:**  \r\n  ë°ì´í„°ë² ì´ìŠ¤ì— ìš”ì²­í•˜ë©´ ê²°ê³¼ê°€ ë°˜í™˜ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê²Œ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ìš”ì²­ì´ ë§ì€ ê²½ìš°, í•œ ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ë‹¤ë¥¸ ì‘ì—…ì´ ëŒ€ê¸°í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ìš”.\r\n- **ë¹„ë™ê¸° ë°©ì‹:**  \r\n  ë°ì´í„°ë² ì´ìŠ¤ ìš”ì²­ì„ ë³´ë‚¸ í›„ì—ë„ ë‹¤ë¥¸ ì‘ì—…ì„ ë™ì‹œì— ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, í•œ ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³ , íš¨ìœ¨ì ìœ¼ë¡œ ì—¬ëŸ¬ ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.\r\n\r\në¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í†µí•´ ìš°ë¦¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‘ë‹µ ì†ë„ì™€ ë™ì‹œ ì²˜ë¦¬ ëŠ¥ë ¥ì„ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆì–´ìš”!\r\n\r\n---\r\n\r\n## 2. ê¸°ì¡´ ë™ê¸° ë°©ì‹ì˜ database.py\r\n\r\nìš°ë¦¬ì˜ ê¸°ì¡´ **database.py**ëŠ” ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì‘ì„±ë˜ì–´ ìˆì—ˆì–´ìš”. ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ì™€ ê°™ì´ ë°ì´í„°ë² ì´ìŠ¤ ì—”ì§„ê³¼ ì„¸ì…˜ì„ ìƒì„±í–ˆì—ˆì£ :\r\n\r\n```python\r\n# ê¸°ì¡´ database.py (ë™ê¸° ë°©ì‹)\r\nfrom sqlalchemy import create_engine\r\nfrom sqlalchemy.orm import sessionmaker\r\n\r\nDATABASE_URL = \"postgresql://user:password@localhost/dbname\"\r\n\r\nengine = create_engine(DATABASE_URL, echo=True)\r\nSessionLocal = sessionmaker(bind=engine)\r\n\r\ndef get_db():\r\n    db = SessionLocal()\r\n    try:\r\n        yield db\r\n    finally:\r\n        db.close()\r\n```\r\n\r\nì´ ë°©ì‹ì€ êµ¬í˜„ì´ ê°„ë‹¨í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ, ë§ì€ ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•ŒëŠ” **I/O ë¸”ë¡œí‚¹** í˜„ìƒì´ ë°œìƒí•˜ì—¬ ì„±ëŠ¥ ì €í•˜ì˜ ì›ì¸ì´ ë˜ê³¤ í•©ë‹ˆë‹¤.\r\n\r\n---\r\n\r\n## 3. ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ê¸°\r\n\r\nì´ì œ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì „í™˜í•´ ë³¼ ê±´ë°ìš”, ì£¼ìš” ë³€ê²½ ì‚¬í•­ì„ í•˜ë‚˜ì”© ì§šì–´ë³´ê² ìŠµë‹ˆë‹¤.\r\n\r\n### 3.1. ë¹„ë™ê¸° ì—”ì§„ ìƒì„±í•˜ê¸°\r\n\r\në™ê¸° ë°©ì‹ ëŒ€ì‹  `sqlalchemy.ext.asyncio` ëª¨ë“ˆì˜ `create_async_engine` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸° ì—”ì§„ì„ ìƒì„±í•©ë‹ˆë‹¤.  \r\në¨¼ì € ë°ì´í„°ë² ì´ìŠ¤ URLì— `+asyncpg`ë¥¼ ì¶”ê°€í•´ì„œ ë¹„ë™ê¸° ë“œë¼ì´ë²„ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤.\r\n\r\n```python\r\nfrom sqlalchemy.ext.asyncio import create_async_engine\r\n\r\nDATABASE_URL = \"postgresql+asyncpg://user:password@localhost/dbname\"\r\nengine = create_async_engine(DATABASE_URL, echo=True)\r\n```\r\n\r\nì´ì œ ì—”ì§„ì€ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•´ ìµœì í™”ë˜ì–´ ì¤€ë¹„ë˜ì—ˆì–´ìš”!\r\n\r\n### 3.2. ë¹„ë™ê¸° ì„¸ì…˜ ìƒì„± ë° í†µí•©\r\n\r\në‹¤ìŒìœ¼ë¡œ, ë¹„ë™ê¸° ì„¸ì…˜ì„ ìƒì„±í•˜ê¸° ìœ„í•´ `AsyncSession`ê³¼ `sessionmaker`ë¥¼ í™œìš©í•©ë‹ˆë‹¤.  \r\në™ê¸° ì½”ë“œì™€ëŠ” ë‹¬ë¦¬ `class_` ë§¤ê°œë³€ìˆ˜ì— `AsyncSession`ì„ ì§€ì •í•´ì£¼ê³ , `expire_on_commit=False` ì˜µì…˜ì„ ì‚¬ìš©í•´ ì„¸ì…˜ì˜ ë§Œë£Œë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.\r\n\r\n```python\r\nfrom sqlalchemy.ext.asyncio import AsyncSession\r\nfrom sqlalchemy.orm import sessionmaker\r\n\r\nasync_session = sessionmaker(\r\n    bind=engine,\r\n    class_=AsyncSession,\r\n    expire_on_commit=False\r\n)\r\n```\r\n\r\nì´ì œ ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ ìš”ì²­ì€ ì´ **ë¹„ë™ê¸° ì„¸ì…˜**ì„ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.\r\n\r\n### 3.3. ë¹„ë™ê¸° ì„¸ì…˜ ê´€ë¦¬ í•¨ìˆ˜ êµ¬í˜„í•˜ê¸°\r\n\r\në¹„ë™ê¸° ë°©ì‹ì—ì„œëŠ” `async with` êµ¬ë¬¸ì„ í™œìš©í•´ ì„¸ì…˜ì„ ì•ˆì „í•˜ê²Œ ì—´ê³  ë‹«ëŠ” ê²ƒì´ ì¤‘ìš”í•´ìš”.  \r\nì•„ë˜ì™€ ê°™ì´ `get_db` í•¨ìˆ˜ë¥¼ ë¹„ë™ê¸° ì œë„ˆë ˆì´í„°ë¡œ ë³€ê²½í•˜ì—¬, ì„¸ì…˜ì„ ì—´ê³  ì‚¬ìš© í›„ ìë™ìœ¼ë¡œ ì¢…ë£Œí•˜ë„ë¡ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n\r\n```python\r\nasync def get_db():\r\n    async with async_session() as session:\r\n        yield session\r\n```\r\n\r\nì´ ì½”ë“œëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì´ ëë‚˜ë©´ `async with` ë¸”ë¡ì´ ì¢…ë£Œë˜ë©´ì„œ ì„¸ì…˜ì„ ê¹”ë”í•˜ê²Œ ë‹«ì•„ì¤˜ìš”.  \r\nì˜ˆì™¸ê°€ ë°œìƒí•˜ë”ë¼ë„ ìë™ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ê°€ ì •ë¦¬ë˜ë¯€ë¡œ, ì•ˆì •ì ì¸ ìš´ì˜ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\r\n\r\n---\r\n\r\n## 4. í†µí•© ì„¸ì…˜ ê´€ë¦¬ì˜ ì¥ì \r\n\r\nì´ë²ˆì— ì„¸ì…˜ ê´€ë¦¬ ì½”ë“œë¥¼ í†µí•©í•˜ë©´ì„œ ì–»ì„ ìˆ˜ ìˆëŠ” ì´ì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\r\n\r\n- **ì½”ë“œì˜ ê°„ê²°í•¨:**  \r\n  ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ ì‹œ ë™ì¼í•œ ë¹„ë™ê¸° ì„¸ì…˜ ê´€ë¦¬ ë¡œì§ì„ ì‚¬ìš©í•˜ë¯€ë¡œ, ì½”ë“œê°€ í›¨ì”¬ ê¹”ë”í•´ì¡ŒìŠµë‹ˆë‹¤.\r\n- **ì•ˆì •ì„± ê°•í™”:**  \r\n  `async with`ë¥¼ ì‚¬ìš©í•˜ë©´, ì˜ˆì™¸ê°€ ë°œìƒí•´ë„ ì„¸ì…˜ì´ ìë™ìœ¼ë¡œ ì¢…ë£Œë˜ì–´ ë¦¬ì†ŒìŠ¤ ëˆ„ìˆ˜ê°€ ì—†ì–´ìš”.\r\n- **ìœ ì§€ë³´ìˆ˜ ìš©ì´ì„±:**  \r\n  ì„¸ì…˜ ê´€ë¦¬ ì½”ë“œê°€ í•œ ê³³ì— ëª¨ì—¬ ìˆìœ¼ë‹ˆ, í–¥í›„ ìˆ˜ì •ì´ë‚˜ í™•ì¥ì´ í•„ìš”í•  ë•Œ í•œ ê³³ë§Œ ê´€ë¦¬í•˜ë©´ ë©ë‹ˆë‹¤.\r\n\r\n---\r\n\r\n## 5. ë§ˆì¹˜ë©°\r\n\r\nì˜¤ëŠ˜ì€ **database.py** íŒŒì¼ì„ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì „í™˜í•˜ê³ , ì„¸ì…˜ ê´€ë¦¬ ì½”ë“œë¥¼ í†µí•©í•˜ëŠ” ë°©ë²•ì„ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.  \r\nì´ë ‡ê²Œ ë³€ê²½í•˜ë©´, ì•ìœ¼ë¡œ API ì„œë²„ë‚˜ í¬ë¡¤ëŸ¬ì—ì„œ ë°œìƒí•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ I/O ì‘ì—…ì„ í›¨ì”¬ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.\r\n\r\në‹¤ìŒ ê¸€ì—ì„œëŠ” **í”„ë¡œì íŠ¸ ëª¨ë¸ ê°œì„  ë° í•„ë“œ ì—…ë°ì´íŠ¸**ì— ëŒ€í•´ ë‹¤ë£° ì˜ˆì •ì´ì—ìš”.\r\n\r\nì—¬ëŸ¬ë¶„ì˜ í”¼ë“œë°±ì´ í° í˜ì´ ë©ë‹ˆë‹¤. ë‹¤ìŒ ê¸€ì—ì„œ ë˜ ë§Œë‚˜ìš”! ğŸš€\r\n\r\n---\r\n\r\nì´ ê¸€ì´ ë„ì›€ì´ ë˜ì—ˆê¸¸ ë°”ë¼ë©°, ì•ìœ¼ë¡œë„ ì§€ì†ì ìœ¼ë¡œ ê°œì„ ëœ ê¸°ìˆ ë“¤ì„ ê³µìœ í•  ì˜ˆì •ì…ë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!\r\n",
  "date": "2025-02-12",
  "category": "backend",
  "tags": [
    "FastAPI",
    "PostgreSQL",
    "Python",
    "Crawler",
    "asyncio",
    "SQLAlchemy",
    "ë¹„ë™ê¸°ì²˜ë¦¬",
    "ë°ì´í„°ìˆ˜ì§‘",
    "ì‹¤ì‹œê°„ì²˜ë¦¬"
  ],
  "thumbnail": "/images/fastapi.png",
  "translations": {
    "ko": {
      "title": "FastAPIì™€ PostgreSQLì„ í™œìš©í•œ ì•„ì›ƒì†Œì‹± í¬ë¡¤ëŸ¬ ê°œë°œ",
      "description": "í”„ë¦¬ëœì„œ í”Œë«í¼ì˜ í”„ë¡œì íŠ¸ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì§‘í•˜ê³  ë¶„ì„í•˜ëŠ” í¬ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ì–´ë³´ì•˜ì–´ìš”. FastAPIì˜ ë¹„ë™ê¸° ì²˜ë¦¬ì™€ PostgreSQLì˜ ê°•ë ¥í•œ ê¸°ëŠ¥ì„ í™œìš©í•´ì„œ íš¨ìœ¨ì ì¸ ì‹œìŠ¤í…œì„ êµ¬ì¶•í–ˆë‹µë‹ˆë‹¤! ğŸš€",
      "content": "<h1 id=\"heading-0\">database.pyë¥¼ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ê³  ì„¸ì…˜ ê´€ë¦¬ í†µí•©í•˜ê¸°</h1>\n<p>ì•ˆë…•í•˜ì„¸ìš”, ì—¬ëŸ¬ë¶„!<br>\nì§€ë‚œ ë²ˆ ê¸€ì—ì„œëŠ” SQLAlchemyì˜ ë¹„ë™ê¸° ì„¤ì •ì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ëŠ”ë°ìš”, ì˜¤ëŠ˜ì€ ê·¸ ì—°ì¥ì„ ìƒì—ì„œ <strong>database.py</strong> íŒŒì¼ì„ ì–´ë–»ê²Œ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ê³ , <strong>ì„¸ì…˜ ê´€ë¦¬ ì½”ë“œë¥¼ í†µí•©</strong>í•  ìˆ˜ ìˆëŠ”ì§€ ìì„¸íˆ ì„¤ëª…í•´ ë“œë¦¬ë ¤ê³  í•´ìš”.</p>\n<p>ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë„ì…í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—… ì‹œ ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„ì„ ì¤„ì´ê³ , ì—¬ëŸ¬ ìš”ì²­ì„ ë™ì‹œì— íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹µë‹ˆë‹¤. í•œ ë²ˆ ì°¨ê·¼ì°¨ê·¼ ì‚´í´ë³¼ê²Œìš”!</p>\n<hr>\n<h2 id=\"heading-1\">1. ì™œ ë¹„ë™ê¸° ë°©ì‹ì¼ê¹Œìš”?</h2>\n<p>ë¨¼ì €, ë™ê¸° ë°©ì‹ê³¼ ë¹„ë™ê¸° ë°©ì‹ì˜ ì°¨ì´ë¥¼ ê°„ë‹¨íˆ ì§šì–´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li><strong>ë™ê¸° ë°©ì‹:</strong><br>\në°ì´í„°ë² ì´ìŠ¤ì— ìš”ì²­í•˜ë©´ ê²°ê³¼ê°€ ë°˜í™˜ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê²Œ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ìš”ì²­ì´ ë§ì€ ê²½ìš°, í•œ ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ë‹¤ë¥¸ ì‘ì—…ì´ ëŒ€ê¸°í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ìš”.</li>\n<li><strong>ë¹„ë™ê¸° ë°©ì‹:</strong><br>\në°ì´í„°ë² ì´ìŠ¤ ìš”ì²­ì„ ë³´ë‚¸ í›„ì—ë„ ë‹¤ë¥¸ ì‘ì—…ì„ ë™ì‹œì— ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, í•œ ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³ , íš¨ìœ¨ì ìœ¼ë¡œ ì—¬ëŸ¬ ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.</li>\n</ul>\n<p>ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ í†µí•´ ìš°ë¦¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‘ë‹µ ì†ë„ì™€ ë™ì‹œ ì²˜ë¦¬ ëŠ¥ë ¥ì„ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆì–´ìš”!</p>\n<hr>\n<h2 id=\"heading-2\">2. ê¸°ì¡´ ë™ê¸° ë°©ì‹ì˜ database.py</h2>\n<p>ìš°ë¦¬ì˜ ê¸°ì¡´ <strong>database.py</strong>ëŠ” ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì‘ì„±ë˜ì–´ ìˆì—ˆì–´ìš”. ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ì™€ ê°™ì´ ë°ì´í„°ë² ì´ìŠ¤ ì—”ì§„ê³¼ ì„¸ì…˜ì„ ìƒì„±í–ˆì—ˆì£ :</p>\n<pre><code class=\"language-python\"># ê¸°ì¡´ database.py (ë™ê¸° ë°©ì‹)\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import sessionmaker\n\nDATABASE_URL = \"postgresql://user:password@localhost/dbname\"\n\nengine = create_engine(DATABASE_URL, echo=True)\nSessionLocal = sessionmaker(bind=engine)\n\ndef get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n</code></pre>\n<p>ì´ ë°©ì‹ì€ êµ¬í˜„ì´ ê°„ë‹¨í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ, ë§ì€ ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•ŒëŠ” <strong>I/O ë¸”ë¡œí‚¹</strong> í˜„ìƒì´ ë°œìƒí•˜ì—¬ ì„±ëŠ¥ ì €í•˜ì˜ ì›ì¸ì´ ë˜ê³¤ í•©ë‹ˆë‹¤.</p>\n<hr>\n<h2 id=\"heading-3\">3. ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ê¸°</h2>\n<p>ì´ì œ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì „í™˜í•´ ë³¼ ê±´ë°ìš”, ì£¼ìš” ë³€ê²½ ì‚¬í•­ì„ í•˜ë‚˜ì”© ì§šì–´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<h3 id=\"heading-4\">3.1. ë¹„ë™ê¸° ì—”ì§„ ìƒì„±í•˜ê¸°</h3>\n<p>ë™ê¸° ë°©ì‹ ëŒ€ì‹  <code>sqlalchemy.ext.asyncio</code> ëª¨ë“ˆì˜ <code>create_async_engine</code> í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸° ì—”ì§„ì„ ìƒì„±í•©ë‹ˆë‹¤.<br>\në¨¼ì € ë°ì´í„°ë² ì´ìŠ¤ URLì— <code>+asyncpg</code>ë¥¼ ì¶”ê°€í•´ì„œ ë¹„ë™ê¸° ë“œë¼ì´ë²„ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤.</p>\n<pre><code class=\"language-python\">from sqlalchemy.ext.asyncio import create_async_engine\n\nDATABASE_URL = \"postgresql+asyncpg://user:password@localhost/dbname\"\nengine = create_async_engine(DATABASE_URL, echo=True)\n</code></pre>\n<p>ì´ì œ ì—”ì§„ì€ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ìœ„í•´ ìµœì í™”ë˜ì–´ ì¤€ë¹„ë˜ì—ˆì–´ìš”!</p>\n<h3 id=\"heading-5\">3.2. ë¹„ë™ê¸° ì„¸ì…˜ ìƒì„± ë° í†µí•©</h3>\n<p>ë‹¤ìŒìœ¼ë¡œ, ë¹„ë™ê¸° ì„¸ì…˜ì„ ìƒì„±í•˜ê¸° ìœ„í•´ <code>AsyncSession</code>ê³¼ <code>sessionmaker</code>ë¥¼ í™œìš©í•©ë‹ˆë‹¤.<br>\në™ê¸° ì½”ë“œì™€ëŠ” ë‹¬ë¦¬ <code>class_</code> ë§¤ê°œë³€ìˆ˜ì— <code>AsyncSession</code>ì„ ì§€ì •í•´ì£¼ê³ , <code>expire_on_commit=False</code> ì˜µì…˜ì„ ì‚¬ìš©í•´ ì„¸ì…˜ì˜ ë§Œë£Œë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.</p>\n<pre><code class=\"language-python\">from sqlalchemy.ext.asyncio import AsyncSession\nfrom sqlalchemy.orm import sessionmaker\n\nasync_session = sessionmaker(\n    bind=engine,\n    class_=AsyncSession,\n    expire_on_commit=False\n)\n</code></pre>\n<p>ì´ì œ ëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ ìš”ì²­ì€ ì´ <strong>ë¹„ë™ê¸° ì„¸ì…˜</strong>ì„ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.</p>\n<h3 id=\"heading-6\">3.3. ë¹„ë™ê¸° ì„¸ì…˜ ê´€ë¦¬ í•¨ìˆ˜ êµ¬í˜„í•˜ê¸°</h3>\n<p>ë¹„ë™ê¸° ë°©ì‹ì—ì„œëŠ” <code>async with</code> êµ¬ë¬¸ì„ í™œìš©í•´ ì„¸ì…˜ì„ ì•ˆì „í•˜ê²Œ ì—´ê³  ë‹«ëŠ” ê²ƒì´ ì¤‘ìš”í•´ìš”.<br>\nì•„ë˜ì™€ ê°™ì´ <code>get_db</code> í•¨ìˆ˜ë¥¼ ë¹„ë™ê¸° ì œë„ˆë ˆì´í„°ë¡œ ë³€ê²½í•˜ì—¬, ì„¸ì…˜ì„ ì—´ê³  ì‚¬ìš© í›„ ìë™ìœ¼ë¡œ ì¢…ë£Œí•˜ë„ë¡ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<pre><code class=\"language-python\">async def get_db():\n    async with async_session() as session:\n        yield session\n</code></pre>\n<p>ì´ ì½”ë“œëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì´ ëë‚˜ë©´ <code>async with</code> ë¸”ë¡ì´ ì¢…ë£Œë˜ë©´ì„œ ì„¸ì…˜ì„ ê¹”ë”í•˜ê²Œ ë‹«ì•„ì¤˜ìš”.<br>\nì˜ˆì™¸ê°€ ë°œìƒí•˜ë”ë¼ë„ ìë™ìœ¼ë¡œ ë¦¬ì†ŒìŠ¤ê°€ ì •ë¦¬ë˜ë¯€ë¡œ, ì•ˆì •ì ì¸ ìš´ì˜ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<hr>\n<h2 id=\"heading-7\">4. í†µí•© ì„¸ì…˜ ê´€ë¦¬ì˜ ì¥ì </h2>\n<p>ì´ë²ˆì— ì„¸ì…˜ ê´€ë¦¬ ì½”ë“œë¥¼ í†µí•©í•˜ë©´ì„œ ì–»ì„ ìˆ˜ ìˆëŠ” ì´ì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>\n<ul>\n<li><strong>ì½”ë“œì˜ ê°„ê²°í•¨:</strong><br>\nëª¨ë“  ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ ì‹œ ë™ì¼í•œ ë¹„ë™ê¸° ì„¸ì…˜ ê´€ë¦¬ ë¡œì§ì„ ì‚¬ìš©í•˜ë¯€ë¡œ, ì½”ë“œê°€ í›¨ì”¬ ê¹”ë”í•´ì¡ŒìŠµë‹ˆë‹¤.</li>\n<li><strong>ì•ˆì •ì„± ê°•í™”:</strong><br>\n<code>async with</code>ë¥¼ ì‚¬ìš©í•˜ë©´, ì˜ˆì™¸ê°€ ë°œìƒí•´ë„ ì„¸ì…˜ì´ ìë™ìœ¼ë¡œ ì¢…ë£Œë˜ì–´ ë¦¬ì†ŒìŠ¤ ëˆ„ìˆ˜ê°€ ì—†ì–´ìš”.</li>\n<li><strong>ìœ ì§€ë³´ìˆ˜ ìš©ì´ì„±:</strong><br>\nì„¸ì…˜ ê´€ë¦¬ ì½”ë“œê°€ í•œ ê³³ì— ëª¨ì—¬ ìˆìœ¼ë‹ˆ, í–¥í›„ ìˆ˜ì •ì´ë‚˜ í™•ì¥ì´ í•„ìš”í•  ë•Œ í•œ ê³³ë§Œ ê´€ë¦¬í•˜ë©´ ë©ë‹ˆë‹¤.</li>\n</ul>\n<hr>\n<h2 id=\"heading-8\">5. ë§ˆì¹˜ë©°</h2>\n<p>ì˜¤ëŠ˜ì€ <strong>database.py</strong> íŒŒì¼ì„ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì „í™˜í•˜ê³ , ì„¸ì…˜ ê´€ë¦¬ ì½”ë“œë¥¼ í†µí•©í•˜ëŠ” ë°©ë²•ì„ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.<br>\nì´ë ‡ê²Œ ë³€ê²½í•˜ë©´, ì•ìœ¼ë¡œ API ì„œë²„ë‚˜ í¬ë¡¤ëŸ¬ì—ì„œ ë°œìƒí•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ I/O ì‘ì—…ì„ í›¨ì”¬ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>\n<p>ë‹¤ìŒ ê¸€ì—ì„œëŠ” <strong>í”„ë¡œì íŠ¸ ëª¨ë¸ ê°œì„  ë° í•„ë“œ ì—…ë°ì´íŠ¸</strong>ì— ëŒ€í•´ ë‹¤ë£° ì˜ˆì •ì´ì—ìš”.</p>\n<p>ì—¬ëŸ¬ë¶„ì˜ í”¼ë“œë°±ì´ í° í˜ì´ ë©ë‹ˆë‹¤. ë‹¤ìŒ ê¸€ì—ì„œ ë˜ ë§Œë‚˜ìš”! ğŸš€</p>\n<hr>\n<p>ì´ ê¸€ì´ ë„ì›€ì´ ë˜ì—ˆê¸¸ ë°”ë¼ë©°, ì•ìœ¼ë¡œë„ ì§€ì†ì ìœ¼ë¡œ ê°œì„ ëœ ê¸°ìˆ ë“¤ì„ ê³µìœ í•  ì˜ˆì •ì…ë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!</p>\n",
      "tocItems": [
        {
          "id": "heading-0",
          "text": "database.pyë¥¼ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ê³  ì„¸ì…˜ ê´€ë¦¬ í†µí•©í•˜ê¸°",
          "level": 1,
          "isMainTopic": true,
          "position": 0
        },
        {
          "id": "heading-1",
          "text": "1. ì™œ ë¹„ë™ê¸° ë°©ì‹ì¼ê¹Œìš”?",
          "level": 2,
          "isMainTopic": true,
          "position": 50
        },
        {
          "id": "heading-2",
          "text": "2. ê¸°ì¡´ ë™ê¸° ë°©ì‹ì˜ database.py",
          "level": 2,
          "isMainTopic": true,
          "position": 100
        },
        {
          "id": "heading-3",
          "text": "3. ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ê¸°",
          "level": 2,
          "isMainTopic": true,
          "position": 150
        },
        {
          "id": "heading-4",
          "text": "3.1. ë¹„ë™ê¸° ì—”ì§„ ìƒì„±í•˜ê¸°",
          "level": 3,
          "isMainTopic": false,
          "position": 200
        },
        {
          "id": "heading-5",
          "text": "3.2. ë¹„ë™ê¸° ì„¸ì…˜ ìƒì„± ë° í†µí•©",
          "level": 3,
          "isMainTopic": false,
          "position": 250
        },
        {
          "id": "heading-6",
          "text": "3.3. ë¹„ë™ê¸° ì„¸ì…˜ ê´€ë¦¬ í•¨ìˆ˜ êµ¬í˜„í•˜ê¸°",
          "level": 3,
          "isMainTopic": false,
          "position": 300
        },
        {
          "id": "heading-7",
          "text": "4. í†µí•© ì„¸ì…˜ ê´€ë¦¬ì˜ ì¥ì ",
          "level": 2,
          "isMainTopic": true,
          "position": 350
        },
        {
          "id": "heading-8",
          "text": "5. ë§ˆì¹˜ë©°",
          "level": 2,
          "isMainTopic": true,
          "position": 400
        }
      ]
    },
    "en": {
      "title": "Building an Outsourcing Crawler with FastAPI and PostgreSQL",
      "description": "I created a crawler that collects and analyzes project information from freelance platforms in real-time. I built an efficient system using FastAPI's asynchronous processing and PostgreSQL's powerful features! ğŸš€",
      "content": "<h1 id=\"heading-0\">Converting database.py to Async and Integrating Session Management</h1>\n<p>Hello everyone!<br>\nIn our last post, we looked at SQLAlchemy's async configuration. Today, we'll dive deeper into how to convert our <strong>database.py</strong> file to async mode and integrate session management code.</p>\n<p>By introducing async processing, we can reduce database operation wait times and efficiently handle multiple requests simultaneously. Let's take a look step by step!</p>\n<hr>\n<h2 id=\"heading-1\">1. Why Async?</h2>\n<p>First, let's briefly cover the difference between synchronous and asynchronous approaches:</p>\n<ul>\n<li><strong>Synchronous:</strong><br>\nWhen making a database request, you have to wait for the result to return. This can cause bottlenecks when there are many requests, as other tasks must wait for the current one to complete.</li>\n<li><strong>Asynchronous:</strong><br>\nYou can continue with other tasks after sending a database request. This means you don't have to wait for one task to finish before starting another, allowing for more efficient handling of multiple operations.</li>\n</ul>\n<p>Async processing can significantly improve our application's response time and concurrent processing capabilities!</p>\n<hr>\n<h2 id=\"heading-2\">2. Original Synchronous database.py</h2>\n<p>Our original <strong>database.py</strong> was written synchronously. For example, we created the database engine and session like this:</p>\n<pre><code class=\"language-python\"># Original database.py (synchronous mode)\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import sessionmaker\n\nDATABASE_URL = \"postgresql://user:password@localhost/dbname\"\n\nengine = create_engine(DATABASE_URL, echo=True)\nSessionLocal = sessionmaker(bind=engine)\n\ndef get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n</code></pre>\n<p>This approach has the advantage of being simple to implement, but when many requests come in, <strong>I/O blocking</strong> occurs, causing performance degradation.</p>\n<hr>\n<h2 id=\"heading-3\">3. Change to Asynchronous Mode</h2>\n<p>Now, let's switch to the asynchronous mode. I'll go through the main changes one by one.</p>\n<h3 id=\"heading-4\">3.1. Create an Asynchronous Engine</h3>\n<p>Instead of using the synchronous <code>create_engine</code> function, use the <code>create_async_engine</code> function from the <code>sqlalchemy.ext.asyncio</code> module to create an asynchronous engine.<br>\nFirst, add <code>+asyncpg</code> to the database URL to use the asynchronous driver.</p>\n<pre><code class=\"language-python\">from sqlalchemy.ext.asyncio import create_async_engine\n\nDATABASE_URL = \"postgresql+asyncpg://user:password@localhost/dbname\"\nengine = create_async_engine(DATABASE_URL, echo=True)\n</code></pre>\n<p>Now, the engine is optimized for asynchronous processing and ready to go!</p>\n<h3 id=\"heading-5\">3.2. Create an Asynchronous Session</h3>\n<p>Next, use <code>AsyncSession</code> and <code>sessionmaker</code> to create an asynchronous session.<br>\nUnlike the synchronous code, specify <code>AsyncSession</code> in the <code>class_</code> parameter and use the <code>expire_on_commit=False</code> option to prevent the session from expiring.</p>\n<pre><code class=\"language-python\">from sqlalchemy.ext.asyncio import AsyncSession\nfrom sqlalchemy.orm import sessionmaker\n\nasync_session = sessionmaker(\n    bind=engine,\n    class_=AsyncSession,\n    expire_on_commit=False\n)\n</code></pre>\n<p>Now, all database requests will use this <strong>asynchronous session</strong>.</p>\n<h3 id=\"heading-6\">3.3. Implement the Asynchronous Session Management Function</h3>\n<p>In the asynchronous mode, it is important to safely open and close the session using the <code>async with</code> statement.<br>\nYou can implement it by changing the <code>get_db</code> function to an asynchronous generator, which opens the session, uses it, and automatically closes it after the operation is complete.</p>\n<pre><code class=\"language-python\">async def get_db():\n    async with async_session() as session:\n        yield session\n</code></pre>\n<p>This code ensures that the session is closed cleanly when the database operation is complete.<br>\nEven if an exception occurs, the resources are automatically cleaned up, ensuring stable operation.</p>\n<hr>\n<h2 id=\"heading-7\">4. Benefits of Integrating Session Management</h2>\n<p>When integrating the session management code, we can achieve the following benefits:</p>\n<ul>\n<li><strong>Clarity:</strong><br>\nAll database access uses the same asynchronous session management logic, making the code much cleaner.</li>\n<li><strong>Stability:</strong><br>\nUsing <code>async with</code> ensures that the session is automatically closed even if an exception occurs, preventing resource leaks.</li>\n<li><strong>Ease of Maintenance:</strong><br>\nThe session management code is all in one place, so it is easy to manage future modifications or extensions.</li>\n</ul>\n<hr>\n<h2 id=\"heading-8\">5. Conclusion</h2>\n<p>Today, we looked at how to convert the <strong>database.py</strong> file to asynchronous mode and integrate session management code.<br>\nBy doing this, we can handle database I/O operations in API servers or crawlers much more efficiently.</p>\n<p>Next, we will cover <strong>improving project models and updating fields</strong>.</p>\n<p>Your feedback is a great help! See you next time! ğŸš€</p>\n<hr>\n<p>I hope this article was helpful, and I will continue to share improved technologies. Thank you!</p>\n",
      "tocItems": [
        {
          "id": "heading-0",
          "text": "Converting database.py to Async and Integrating Session Management",
          "level": 1,
          "isMainTopic": true,
          "position": 0
        },
        {
          "id": "heading-1",
          "text": "1. Why Async?",
          "level": 2,
          "isMainTopic": true,
          "position": 50
        },
        {
          "id": "heading-2",
          "text": "2. Original Synchronous database.py",
          "level": 2,
          "isMainTopic": true,
          "position": 100
        },
        {
          "id": "heading-3",
          "text": "3. Change to Asynchronous Mode",
          "level": 2,
          "isMainTopic": true,
          "position": 150
        },
        {
          "id": "heading-4",
          "text": "3.1. Create an Asynchronous Engine",
          "level": 3,
          "isMainTopic": false,
          "position": 200
        },
        {
          "id": "heading-5",
          "text": "3.2. Create an Asynchronous Session",
          "level": 3,
          "isMainTopic": false,
          "position": 250
        },
        {
          "id": "heading-6",
          "text": "3.3. Implement the Asynchronous Session Management Function",
          "level": 3,
          "isMainTopic": false,
          "position": 300
        },
        {
          "id": "heading-7",
          "text": "4. Benefits of Integrating Session Management",
          "level": 2,
          "isMainTopic": true,
          "position": 350
        },
        {
          "id": "heading-8",
          "text": "5. Conclusion",
          "level": 2,
          "isMainTopic": true,
          "position": 400
        }
      ]
    }
  },
  "imageHeights": {}
}
{
  "id": "entasis_engin_13",
  "title": "Entasis Engine - ë°ì´í„° ìˆ˜ì§‘ê¸° êµ¬í˜„",
  "content": "<p>ì•ˆë…•í•˜ì„¸ìš”, ë™ë£Œ ì—¬ëŸ¬ë¶„! ğŸ˜Š</p>\n<p>ì˜¤ëŠ˜ì€ <strong>Spring Boot</strong> ê¸°ë°˜ìœ¼ë¡œ ë°”ì´ë‚¸ìŠ¤ì˜ í˜„ë¬¼ê³¼ ì„ ë¬¼ ì‹œì¥ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ìˆ˜ì§‘í•˜ì—¬ <strong>TimescaleDB</strong>ì— ì €ì¥í•˜ëŠ” ë°ì´í„° ìˆ˜ì§‘ê¸°ë¥¼ ì–´ë–»ê²Œ êµ¬í˜„í–ˆëŠ”ì§€ ê³µìœ í•´ë³´ë ¤ê³  í•´ìš”. ì´ ê¸€ì—ì„œëŠ” ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜, API í˜¸ì¶œ ë°©ë²•, ì„œë¹„ìŠ¤ ë ˆì´ì–´ êµ¬ì„±, ì—ëŸ¬ ì²˜ë¦¬ ë“± ë‹¤ì–‘í•œ êµ¬í˜„ í¬ì¸íŠ¸ë¥¼ ì¹œê·¼í•˜ê²Œ í’€ì–´ë“œë¦´ê²Œìš”!</p>\n<hr>\n<h2 id=\"heading-0\">ì‹œìŠ¤í…œ ê°œìš”</h2>\n<p>ìš°ë¦¬ ì‹œìŠ¤í…œì€ ì•„ë˜ì™€ ê°™ì€ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:</p>\n<ul>\n<li><strong>ë°ì´í„° ìˆ˜ì§‘ê¸°</strong>\n<ul>\n<li><strong>BinanceExchange</strong>: ë°”ì´ë‚¸ìŠ¤ì˜ <strong>í˜„ë¬¼ ì‹œì¥</strong> ë°ì´í„°(BTC/USDT, ETH/USDT) ìˆ˜ì§‘</li>\n<li><strong>BinanceFuturesExchange</strong>: ë°”ì´ë‚¸ìŠ¤ì˜ <strong>ì„ ë¬¼ ì‹œì¥</strong> ë°ì´í„°(BTCUSDT, ETHUSDT) ìˆ˜ì§‘</li>\n</ul>\n</li>\n<li><strong>API í˜¸ì¶œ</strong>: <code>WebClient</code>ë¥¼ ì‚¬ìš©í•´ ë°”ì´ë‚¸ìŠ¤ APIë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.</li>\n<li><strong>ì„œë¹„ìŠ¤ ë ˆì´ì–´</strong>\n<ul>\n<li><code>SpotMarketDataServiceImpl</code>: í˜„ë¬¼ ì‹œì¥ ë°ì´í„° ì²˜ë¦¬</li>\n<li><code>FuturesMarketDataServiceImpl</code>: ì„ ë¬¼ ì‹œì¥ ë°ì´í„° ì²˜ë¦¬</li>\n<li><code>ExchangeRepository</code>: ê±°ë˜ì†Œ ì •ë³´ ê´€ë¦¬ ë° TimescaleDB ì €ì¥</li>\n</ul>\n</li>\n<li><strong>ë°ì´í„° ìˆ˜ì§‘ ì£¼ê¸°</strong>: 1ì´ˆ ê°„ê²©ìœ¼ë¡œ ë°ì´í„° ìˆ˜ì§‘ ë° ì €ì¥</li>\n<li><strong>ì—ëŸ¬ ì²˜ë¦¬</strong>: API ì‘ë‹µ null ì²´í¬, ì˜ˆì™¸ ì²˜ë¦¬ ë° ë¡œê¹…, ë°ì´í„°ë² ì´ìŠ¤ ì œì•½ì¡°ê±´ ê´€ë ¨ ì˜¤ë¥˜ ì²˜ë¦¬</li>\n</ul>\n<hr>\n<h2 id=\"heading-1\">ì£¼ìš” êµ¬í˜„ í¬ì¸íŠ¸</h2>\n<h3 id=\"heading-2\">1. WebClientë¥¼ í™œìš©í•œ API í˜¸ì¶œ</h3>\n<p>ë¹„ë™ê¸° ë°©ì‹ì˜ <strong>WebClient</strong>ë¥¼ ì´ìš©í•˜ì—¬ ë°”ì´ë‚¸ìŠ¤ APIë¡œë¶€í„° ë°ì´í„°ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. ì•„ë˜ëŠ” <code>BinanceExchange</code> í´ë˜ìŠ¤ì˜ ì˜ˆì‹œì…ë‹ˆë‹¤:</p>\n<pre><code class=\"language-java\">@Service\npublic class BinanceExchange {\n\n<pre><code>private static final Logger log = LoggerFactory.getLogger(BinanceExchange.class);\nprivate final WebClient webClient = WebClient.create(\"https://api.binance.com\");\n\npublic Mono&amp;#x3C;JsonNode&gt; getSpotMarketData(String symbol) {\n    return webClient.get()\n        .uri(uriBuilder -&gt; uriBuilder\n            .path(\"/api/v3/ticker/price\")\n            .queryParam(\"symbol\", symbol)\n            .build())\n        .retrieve()\n        .bodyToMono(JsonNode.class)\n        .doOnError(e -&gt; log.error(\"API í˜¸ì¶œ ì¤‘ ì—ëŸ¬ ë°œìƒ: {}\", e.getMessage()))\n        .onErrorReturn(null);\n}\n</code></pre>\n</code><p><code class=\"language-java\">}<br></code></p></pre><p></p><blockquote>\n<p><strong>Tip:</strong> ì—ëŸ¬ ë°œìƒ ì‹œ ë¡œê¹…ì„ í†µí•´ ë¬¸ì œë¥¼ ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆê³ , <code>onErrorReturn(null)</code>ì„ ì‚¬ìš©í•´ null ì²´í¬ë¡œ ì´ì–´ì§€ëŠ” ì²˜ë¦¬ë¥¼ ê°„í¸í•˜ê²Œ í–ˆì–´ìš”. ğŸ˜‰</p>\n</blockquote>\n<hr>\n<h3 id=\"heading-3\">2. ì„œë¹„ìŠ¤ ë ˆì´ì–´ êµ¬í˜„</h3>\n<p>ê° ì‹œì¥ë³„ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì„œë¹„ìŠ¤ ë ˆì´ì–´ì—ì„œëŠ” APIë¡œë¶€í„° ë°›ì€ ë°ì´í„°ë¥¼ ê°€ê³µ í›„ ì €ì¥í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, <code>SpotMarketDataServiceImpl</code> í´ë˜ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë©ë‹ˆë‹¤:</p>\n<pre><code class=\"language-java\">@Service\npublic class SpotMarketDataServiceImpl implements SpotMarketDataService {\n\n<pre><code>private static final Logger log = LoggerFactory.getLogger(SpotMarketDataServiceImpl.class);\nprivate final BinanceExchange binanceExchange;\nprivate final ExchangeRepository exchangeRepository;\n\npublic SpotMarketDataServiceImpl(BinanceExchange binanceExchange,\n                                 ExchangeRepository exchangeRepository) {\n    this.binanceExchange = binanceExchange;\n    this.exchangeRepository = exchangeRepository;\n}\n\n@Override\npublic void collectData() {\n    // í˜„ë¬¼ ì‹œì¥: BTC/USDT, ETH/USDT ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.\n    List&amp;#x3C;String&gt; symbols = Arrays.asList(\"BTCUSDT\", \"ETHUSDT\");\n    for (String symbol : symbols) {\n        try {\n            JsonNode response = binanceExchange.getSpotMarketData(symbol).block();\n            if (response != null) {\n                String price = response.get(\"price\").asText();\n                ExchangeData data = new ExchangeData(symbol, price, LocalDateTime.now());\n                exchangeRepository.save(data);\n                log.info(\"ë°ì´í„° ì €ì¥ ì„±ê³µ - {}: {}\", symbol, price);\n            } else {\n                log.warn(\"API ì‘ë‹µì´ nullì…ë‹ˆë‹¤. symbol: {}\", symbol);\n            }\n        } catch (Exception e) {\n            log.error(\"ë°ì´í„° ìˆ˜ì§‘ ì¤‘ ì˜ˆì™¸ ë°œìƒ: {}\", e.getMessage());\n        }\n    }\n}\n</code></pre>\n</code><p><code class=\"language-java\">}<br></code></p></pre><p></p><blockquote>\n<p><strong>ì°¸ê³ :</strong> ì„ ë¬¼ ì‹œì¥ ë°ì´í„° ì²˜ë¦¬ëŠ” <code>FuturesMarketDataServiceImpl</code>ì—ì„œ ë¹„ìŠ·í•œ ë¡œì§ìœ¼ë¡œ êµ¬í˜„ë˜ë©°, ë°”ì´ë‚¸ìŠ¤ì˜ ì„ ë¬¼ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•˜ë„ë¡ êµ¬ì„±ë˜ì–´ ìˆì–´ìš”.</p>\n</blockquote>\n<hr>\n<h3 id=\"heading-4\">3. ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ í†µí•œ ì£¼ê¸°ì  ë°ì´í„° ìˆ˜ì§‘</h3>\n<p>ë°ì´í„°ë¥¼ 1ì´ˆ ê°„ê²©ìœ¼ë¡œ ìˆ˜ì§‘í•˜ê¸° ìœ„í•´ Springì˜ <code>@Scheduled</code> ì• ë…¸í…Œì´ì…˜ì„ í™œìš©í–ˆìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"language-java\">@Component\npublic class MarketDataScheduler {\n\n<pre><code>private final SpotMarketDataService spotMarketDataService;\nprivate final FuturesMarketDataService futuresMarketDataService;\n\npublic MarketDataScheduler(SpotMarketDataService spotMarketDataService,\n                           FuturesMarketDataService futuresMarketDataService) {\n    this.spotMarketDataService = spotMarketDataService;\n    this.futuresMarketDataService = futuresMarketDataService;\n}\n\n@Scheduled(fixedRate = 1000)\npublic void collectMarketData() {\n    spotMarketDataService.collectData();\n    futuresMarketDataService.collectData();\n}\n</code></pre>\n</code><p><code class=\"language-java\">}<br></code></p></pre><p></p><blockquote>\n<p><strong>ë…¸í•˜ìš°:</strong> ì£¼ê¸°ì  ë°ì´í„° ìˆ˜ì§‘ ì‹œ, ë°˜ë“œì‹œ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í†µí•´ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì¤‘ë‹¨ë˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•´ìš”. ğŸ˜Š</p>\n</blockquote>\n<hr>\n<h2 id=\"heading-5\">ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹…</h2>\n<ul>\n<li><strong>API ì‘ë‹µ null ì²´í¬:</strong> ì‘ë‹µì´ nullì¸ ê²½ìš° ì ì ˆí•œ ê²½ê³  ë¡œê¹…ì„ ìˆ˜í–‰í•˜ì—¬ ë¬¸ì œë¥¼ íŒŒì•…í•©ë‹ˆë‹¤.</li>\n<li><strong>ì˜ˆì™¸ ì²˜ë¦¬:</strong> try-catch ë¸”ë¡ì„ í†µí•´ ì˜ˆì™¸ ë°œìƒ ì‹œ ë¡œê¹…í•˜ê³ , ì‹œìŠ¤í…œ ì „ì²´ì— ì˜í–¥ì´ ì—†ë„ë¡ í•©ë‹ˆë‹¤.</li>\n<li><strong>ë°ì´í„°ë² ì´ìŠ¤ ì œì•½ì¡°ê±´ ì˜¤ë¥˜:</strong> ì €ì¥ ì‹œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì œì•½ì¡°ê±´ ì˜¤ë¥˜ë¥¼ ì‚¬ì „ì— í™•ì¸í•˜ê³ , í•„ìš”í•œ ê²½ìš° íŠ¸ëœì­ì…˜ ì²˜ë¦¬ë¥¼ í†µí•´ ì•ˆì •ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.</li>\n</ul>\n<hr>\n<h2 id=\"heading-6\">ë§ˆì¹˜ë©°</h2>\n<p>ì´ì™€ ê°™ì´ êµ¬í˜„í•¨ìœ¼ë¡œì¨ <strong>ë°”ì´ë‚¸ìŠ¤</strong>ì˜ í˜„ë¬¼ ë° ì„ ë¬¼ ì‹œì¥ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì•ˆì •ì ìœ¼ë¡œ ìˆ˜ì§‘í•˜ê³  <strong>TimescaleDB</strong>ì— ì €ì¥í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆì–´ìš”. ì´ ê³¼ì •ì—ì„œ <code>WebClient</code>, ìŠ¤ì¼€ì¤„ë§, ì—ëŸ¬ ì²˜ë¦¬, ë¡œê¹… ë“± ë‹¤ì–‘í•œ Spring Bootì˜ ê¸°ëŠ¥ë“¤ì„ í™œìš©í•˜ì˜€ëŠ”ë°ìš”, ì—¬ëŸ¬ë¶„ì˜ í”„ë¡œì íŠ¸ì—ë„ ë„ì›€ì´ ë˜ê¸¸ ë°”ëë‹ˆë‹¤! ğŸš€</p>\n<p>ê¶ê¸ˆí•œ ì ì´ë‚˜ ì˜ê²¬ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ í¸í•˜ê²Œ ì´ì•¼ê¸°í•´ ì£¼ì„¸ìš”! ì¢‹ì€ í•˜ë£¨ ë³´ë‚´ì„¸ìš”! ğŸ˜„</p>\n<p>Happy Coding!</p>\n",
  "date": "2025-02-14",
  "category": "projects",
  "tags": [
    "spring-boot",
    "binance-api",
    "webclient",
    "scheduler",
    "timescaledb",
    "data-collection",
    "error-handling"
  ],
  "description": "ê°€ìƒìì‚° ê±°ë˜ì†Œ ë°ì´í„° ìˆ˜ì§‘ ë° ì €ì¥ ì‹œìŠ¤í…œ êµ¬í˜„ ê°€ì´ë“œ",
  "thumbnail": "/images/cryptocurrency.jpg",
  "tocItems": [
    {
      "id": "heading-0",
      "text": "ì‹œìŠ¤í…œ ê°œìš”",
      "level": 2,
      "isMainTopic": true,
      "position": 149.4140625
    },
    {
      "id": "heading-1",
      "text": "ì£¼ìš” êµ¬í˜„ í¬ì¸íŠ¸",
      "level": 2,
      "isMainTopic": true,
      "position": 466.7421875
    },
    {
      "id": "heading-2",
      "text": "1. WebClientë¥¼ í™œìš©í•œ API í˜¸ì¶œ",
      "level": 3,
      "isMainTopic": false,
      "position": 515.65625
    },
    {
      "id": "heading-3",
      "text": "2. ì„œë¹„ìŠ¤ ë ˆì´ì–´ êµ¬í˜„",
      "level": 3,
      "isMainTopic": false,
      "position": 1030.59375
    },
    {
      "id": "heading-4",
      "text": "3. ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ í†µí•œ ì£¼ê¸°ì  ë°ì´í„° ìˆ˜ì§‘",
      "level": 3,
      "isMainTopic": false,
      "position": 1787.03125
    },
    {
      "id": "heading-5",
      "text": "ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡œê¹…",
      "level": 2,
      "isMainTopic": true,
      "position": 2282.6640625
    },
    {
      "id": "heading-6",
      "text": "ë§ˆì¹˜ë©°",
      "level": 2,
      "isMainTopic": true,
      "position": 2447.4921875
    }
  ],
  "imageHeights": {}
}